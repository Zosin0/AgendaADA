<header class="communication-hub">
  <div class="hub-title">
    <h1>Communication HUB</h1>
  </div>
  <div class="hub-actions">
    <div class="search-bar">
      <span class="material-icons">search</span>
      <input
        type="text"
        placeholder="Pesquisar contatos..."
        (input)="onFilterChange($event)">
    </div>
    <button mat-icon-button class="sort-button"
            (click)="toggleSort()"
            [matTooltip]="(sortOrder$ | async) === 'asc' ? 'Ordenado A-Z' : (sortOrder$ | async) === 'desc' ? 'Ordenado Z-A' : 'Sem ordenação'"
            [class.active]="(sortOrder$ | async) !== 'none'">
      <mat-icon>sort_by_alpha</mat-icon>
    </button>
  </div>
</header>

<main class="contacts-section">
  <ng-container *ngIf="sortedContatos$ | async as contatos; else loading">
    <div *ngIf="contatos.length > 0; else emptyState" class="contacts-grid">
      <app-contato-item
        *ngFor="let contato of contatos"
        [contato]="contato"
        (viewProfile)="abrirPerfil($event)"
        (editContact)="abrirModalDeCadastro($event)"
        (deleteContact)="confirmarExclusao($event)">
      </app-contato-item>
    </div>
  </ng-container>

  <ng-template #emptyState>
    <div class="empty-state">
      <span class="material-icons empty-icon">search_off</span>
      <p>Nenhum contato encontrado.</p>
      <p class="muted">Tente um termo de pesquisa diferente ou adicione um novo contato.</p>
    </div>
  </ng-template>

  <ng-template #loading>
    <div class="loading-state">
      <p>Carregando contatos...</p>
    </div>
  </ng-template>
</main>

<button (click)="abrirFormularioCadastro()" type="button" class="fab-add" mat-fab color="primary"
  aria-label="Cadastrar novo contato">
  <span class="material-icons">add</span>
</button>
